import{G as x,g as R}from"./pdf-B47zZseS.js";import{s as C}from"./index-CiYh4-x1.js";import{r as u,a as D,o as _,b as n,t as B}from"./index-CY3I9z2Q.js";const O={style:{"white-space":"pre-wrap","word-break":"break-word"}},j={__name:"index",setup(P){x.workerSrc="/node_modules/pdfjs-dist/build/pdf.worker.mjs";const d=u(null),o=u("請選擇 PDF 開始辨識..."),f=async s=>{o.value="載入中...";const l=await(await R({data:s}).promise).getPage(11),c=l.getViewport({scale:6}),r=d.value,p=r.getContext("2d");r.width=c.width,r.height=c.height,await l.render({canvasContext:p,viewport:c}).promise;const a=p.getImageData(0,0,r.width,r.height).data;for(let t=0;t<a.length;t+=4){const k=a[t],v=a[t+1],y=a[t+2],b=.299*k+.587*v+.114*y>128?255:0;a[t]=a[t+1]=a[t+2]=b}o.value="OCR 辨識中...";const m=r.toDataURL("image/png"),g=await C.createWorker("chi_tra"),{data:{text:h}}=await g.recognize(m);o.value=h.replace(/ /g,""),await g.terminate()},w=s=>{const e=s.target.files[0];if(!e)return;const i=new FileReader;i.onload=()=>{const l=i.result;f(new Uint8Array(l))},i.readAsArrayBuffer(e)};return(s,e)=>(_(),D("div",null,[e[0]||(e[0]=n("h1",null,"OCR with Black & White + Sharpening",-1)),n("input",{type:"file",accept:"application/pdf",onChange:w},null,32),n("canvas",{ref_key:"canvasRef",ref:d,style:{border:"1px solid black"}},null,512),e[1]||(e[1]=n("hr",null,null,-1)),e[2]||(e[2]=n("h2",null,"OCR Result:",-1)),n("pre",O,B(o.value),1)]))}};export{j as default};
